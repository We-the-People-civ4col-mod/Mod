We the People Changelog

Version 4.1

Changes:
- New MapSize "Massive" + some new Maps for it
- Reduced generation of Coral Reefs on Ocean
- "Bakery Products" have been renamed to "Provisions"
- Immigration Overhaul (too many Units on Dock waiting reduces Immigration)
- The flag on the Danish Schooner is no longer mirrored
- Buttons to import/export all yields now include more yields
- More background music added
- Changes to when some events will trigger (no spoilers with specifics here)
- Production help text (like mouseover on hammers) now has the leader contribution listed as a standalone line
- Domestic Advisor gained mouseover help text on the production page
- Event help text now informs more about production changes
- Wild Feathers are now used to produce (padded) Goat Hide Boots.
- #427 #820 Build road to location now allows the player to pick which type of road to build
- Readme is now html as that allows index with links to each section
- Savegames will no longer break if more buildings or units are added to xml
- Added more achievements
- #723 Map sizes have changed to avoid black map when zooming out (random maps only, doesn't affect existing savegames)
- Added proper error message windows. Also message windows will no longer show error icon and error sound.
- #813: Button to filter Yields in City Screen to only available ones
- Random map adjustments to terrain and land mass
- Removed source code from releases (mod starts faster). Source code is still available in a seperate release zip file
- Added new game speed for builders (slower than Marathon)
- Names of colonies, generals, admirals and ships now support Cyrillic (Russian only, manually entering colony names still has issues)
- City billboards now support Cyrillic without manually replacing GameFont.tga (game restart required when switching to/from Russian)
- Random map generation is now updated to handle new terrains and terrain features in a more balanced way

New Units:
- Added failed native trader
- Seasoned trader
- Eccentric architect
- Prisoners of war (incl. Events to exchange them in Missions / Forts)
- A new unique unit for each European civilization

Graphic updates (new or improved):
- Achievements: 71
- Bonuses: 7
- Buttons: 9
- Units: 26

Colopedia:
- Major improvements

Translations:
- Improved quality of English text
- French translation is being maintained again due to the arrival of a new translator
- Major updates to French
- Significant updates to Russian
- German is still being maintained and is still up to date

Balance:
- Native raids no longer destroys all production
- Cross cost of immigrants now increases slower, but max price has increased
- Slave Overseer and Slave Hunter are now less overpowered
- Town guard is now a bit stronger
- Master carpenters now reqiures a college for education
- Cargo price changes
- Dutch Mercantile trait now provides trade goods in colonies
- French now gets 2 baked goods per colony per turn
- Hemp and flax planters are now available in Europe
- Rebalanced what some of the terrains can produce
- More terrains now produce clay (should reduce the risk of not being able to produce any)
- Corrected Balancing of REF to not get Terrain Defenses

Fixes:
- Goodies no longer spawn on mountain peaks
- Domestic prices are no longer unattractive compared to European prices
- Full barracks no longer blocks civilians and cargo from being unloaded
- Founding fathers will no longer be able to reveal shipwrecks as that would discover the Pacific without going there
- Russian dragoons will no longer have greatly oversized heads in some situations
- Event where servant steals money will now remove money rather than adding them to the player
- Peace granted through a founding father will now have a minimum duration (prevents declaring war the following turn)
- Failed Missionary could not use the school system
- #808: leader traits granding production bonuses to all colonies will now always provide those in all colonies
- Production help text (like mouseover on hammers) will now display the correct numbers
- Taiga no longer prevents pioneers from building farms or plantations
- Danish ship (which?) now has a Danish flag, not English
- Fixed issue where docks could not be built on certain small lakes
- Great general can now join artillery professions
- FF Verrazano now reveals goodie huts
- Fixed a missing ambient sound for Terrains
- Sea animals no longer spawns under ice
- Fixed issue with wool related to storage capacity view
- Fixed issue with Cochineal using wrong Improvement
- #842 Fixed issue caused by cashing of Slave Production Modifier
- Foreign kings offering immigrants will now offer a random unit and not just the same as what other kings offer
- #846 starting a game in another era than discovery will no longer crash the game (still not recommended to start in anything but discovery)
- #854 Buying deep water ships from king without any suitable colony no longer crashes the game
- Fixed issue where construction supplies didn't take up cargo space as intended
- #865 with Construction supplies that could not be loaded on Wagon Trains, Smuggling Ships
- Fixed vanilla bug where AI assumed it could construct all buildings due to a typo
- Attacking smuggler ships no longer reveals their owner
- Fog no longer prevents pioneers from building improvements
- #845 European wars will no longer be able to end right after they started
- Port Royal, not Africa is where new world resource experts can be bought
- #872 Colony screen no longer breaks completely by trying to draw the icon of NO_YIELD
- Carriages can now use ferries across large rivers
- Fixed pathfinding issue where ships would sometimes prefer to go through storms
- Iron Mines, Iron Mills and Peat Pits no longer destroys bogs (ore boosting improvements should not remove a +2 ore bonus)
- #804 Ice lakes are no longer generated in deserts
- Fixed a number of seemingly random crashes caused by selection groups containing a NULL unit
- Citadels ands Bastions will no longer view all units as infrantry
- #874 Automated scouts will now take enemy units into account when moving
- #874 Automated scouts will now stop automation if they are done exploring, hence making the player aware that the scout is available
- Units can no longer move after bombarding a colony
- Fixed (vanilla?) bug where selling to natives increases the counter of what has been sold in Europe
- AI settlers will no longer permanently take up a cargo slot on a ship if it can't find a suitable location to settle
- Ranchers no longer lists domestic requirements, which it doesn't actually require
- #900 Fixed issue where tax increases could cause tax to decrease (only happened with taxes above 60%)
- #902 createAnimalsSea now uses xml settings for sea animals rather than land animals
- Fixed rare issue where Town guard could end up with blue skin

Internals:
- Added wrapper classes to avoid exe and python from calling our code directly (adds modding freedom)
- Complete rewrite of OOS logging to allow savegame to dump all saved data to the log output

Version 4.0.2

Changes:
- Loading We The People from the ingame menu now configures Colonization to start We The People by default (no more config setup to avoid starting in vanilla)
- Added setup file to simplify installing the mod (install step 5 only)

Fixes:
- Fixed seemingly random crash when the game tries to display the scattering birds animation on terrain features other than forests (such as storms)
- Fixed transports not being able to unload cargo when barracks are full

Version 4.0.1

Changes:
- Desktop Icon replaced with one, which matches our forum thread image

Fixes:
- Winning an attack on a colony or settlement will no longer make the other defending units leave
- #799: emphasize no longer resets between turns
- Fixed bug, which turned some lakes into shallow coast
- Switching the language to Spanish will no longer cause an error

Version 4.0

Major Changes:
- Several new terrains, terrain features and Bonus Resources
- Many new yields and manufacturing products
- Buildings and specialists for the new yields and manufacturing products
- Buildings require additional different resources (e.g. clay)
- Equipping units now requires additional different resources (bakery products, gunpowder)
- Artillery are now colonist units with equipment (cannons + gunpowder) and have specialists
- Diversified naval units and royal units - note that some ships now have limitations on what they can transport!
- Crime/Law System: Larger cities will cause crime which will need to be countered by judges (producing law)
- (default off) New Movement System: Moving through a tile can now require several turns, making slow units much slower in difficult terrain (no more 1 plot/turn)
- Barracks System and Harbour System, that limit the amount of troops and ships in a city
- Cargo Overhaul (ships may have now restrictions what they may carry)
- Ref Overhaul (e.g. Ref comes with more Ship Types, Generals, Admirals, ...)
- Artillery Units have been rebuilt into Professions that need to be equiped but also have experts
- Health Overhaul (Terrain, Terrain Features, Bonus Resources, ...) may impact Health
- Taverns allow Professions to employee Experts for Happiness and Culture

Other Gameplay Changes:
- Coastal tiles can now be "shallow coast", a terrain type which only small ships can enter
- Oceans now have "currents", affecting movement with or against the current
- City growth now gives different types of colonists depending on the people that work in the city (free/forced laborers, ancestry)
- Slaves will sometimes not run away, but start an armed rebellion against their oppression in the colonies
- Several new units have been added (buccaneer, slave overseer, slave hunter)
- Brave Lieutenants and Capable Captains can be earned in battle (like a "small version" of generals/admirals)
- Your king will now allow you to buy a used ship from time to time
- Other kings will allow you to buy a random colonist from time to time
- Battle damage will now sometimes cause a "negative promotion" which can only be removed by fully healing the unit.
- Many new Founding Fathers have been added (especially covering the new yields)
- A huge amount of new events and improvements in Event System (e.g. Events may spawn hostile Units)
- Length of game (turns) increased, game speeds adapted. Length of turns in months is now constant throughout the game.
- Culture is more important now, it may also produce Political FF points (less than however Liberty Bells)
- Massive rebalancing of Traits, including changes that give completely new gameplay strategies
- Domestic Market Events that may heavily impact prices and demand in Cities.
- Many new DLL Diplo Events (e.g. related to Privateers, Wars with Natives or Royal Interventions)
- New Plot Improvements that add effects to a City (e.g. additional Storage, bonus on Production, ...)
- Other new Plot Improvements like Irrigation in Deserts, Salinas or Canals
- New Goody rewards both on Map Goodies but also when talking to Chieftain of villages
- Fishing Boats may also build Water Improvements on Bonus Resources (e.g. Fishing Nets and Hunting Stages)
- Domestic advisor now has new sections for education and happiness
- Domestic advisor is mostly rewritten to properly use the screen resolution instead of upscaling 1024x768

Maps:
- All maps have been revised for the new terrains
- Most of the new terrain is now generated by FaireWeatherTweakEx.py
- FaireWeatherTweakEx.py can now generate large rivers

Translations:
- English and German translation have been updated
- Russian translation is quickly progressing
- Other translations might not be completely updated to the current version

AI:
- Many AI improvements (including several critical issues that greatly impaired the AI)  
- Logging of AI actions (to enable ensure that LoggingEnabled = 1 is set in CivilizationIV.ini, the log itself is found in Logs\BBAI.log  
- AI won't get stuck so easily in early game because we start with a period of forced open borders

Graphics & Sound:
- Unit sizes harmonized
- Size of buildings on the map harmonized
- Enhanced the soundtrack by many royalty free titles
- WTP improved version of "Captured City Art Mod".
- Zooming allows now "Dynamic Scaling" (just try which Zoom / Scale level you like best)

Bugfixes:
- We fixed so many bugs we don't remember all of them ... ;)
- Multiple OOS (multiplayer desync) bugs have been fixed

Internals:
- Added multi-thread support to certain tasks to use all CPU cores for better performance
- Improved performance unrelated to number of CPU cores
- Ported and adapted Karadoc's pathfinder (originally written for the Civ4 mod K-Mod) 
- Brand new logging system intended to find network desync bugs
- Many hardcoded values in the source code now either rely on autogenerated code or reading xml to make the code maintainable
- More type strictness to the code (readability/bug avoidance), so far enum types and a new coordinate class
- Added an "engine" for domestic advisor, which results in one file for each ingame page, making it much easier to add more


Version 3.0.1

Fixes:
- Livestock (including horses) will no longer apply modifer for game speed twice (growth was way too slow in Marathon speed)
- Ships, which can't load civilian units will no longer get nothing from exploring ship wrecks

Version 3.0

Major milestone in AI. It now knows how to develop an economy to allow proper colony development as the game progresses. Text has once again been given a major overhaul, making the game generally look more impressive. Backward compatibile with savegames from 2.9.

Improvements/rebalance:
- Learning by doing works faster if there is an expert (teacher) present in the colony
- Learning by doing now remembers the past two professions, allowing to switch to another profession for a turn or two without clearing progress
- Pioneers can now remove roads
- Guarded goodies rebalanced
- Promotions now allow for a bonus modifier for getting gold from defeating animals
- New terrain type: lakes
- Docks now add a bit of warehouse storage space
- Statue of governor now also adds cross production
- Gather boats can no longer trade with natives
- New game option to remove world builder
- The king's requests for gold now depends on multiple factors like population and isn't just a percentage of your stored gold

Fixes:
- Dragging a unit to a plot in the colony screen will no longer fail if it hits the "plot info corner"
- #449 AI units no longer gets stuck while crossing large rivers
- Land units crossing rivers will no longer board transports if there just happens to be one on the plot
- Sail to Europe button is now only displayed if the unit can reach Europe (read: not landlocked)
- Raiding natives can no longer cause negative cargo to be stored
- #472 Natives can no longer sell more cargo than they have causing negative cargo stored in the settlement
- Random events can no longer cause negative food stored in colonies (happened only on game speeds slower than normal)
- Price of settler now considers modifers from game speed, difficulty(AI only) and Founding Fathers
- #465 Barbarian player can no longer conquer colonies and then crash the game as it lacks settings to run colonies
- #466 Destroying a colony now removes all traderoutes to that colony even if feeder service is active
- Units can't leave colonies during unrests (prevents the units from disappearing for a turn)
- Ships in a colony/settlement will no longer defend if attacked by land units
- Ships no longer stop for hostile units if said units are on land
- Fixed plots not updating visibility correctly (for the last time this time... hopefully. Entire code is rewritten)
- Fixed 3 events, which had incorrect xml data, causing them to misbehave (likely fail to trigger when they should)
- European only random events can no longer trigger for natives
- Animals are no longer able to pillage roads or improvements
- The two cargo slows added by EVENT_CARGOSPACE will no longer vanish after saving and loading (won't restore if the slots already vanished in a game)
- #469 tribal villages no longer try to trigger a non-existing effect
- Animal spawning starting time now takes game speed into account
- Big coastal ships can now gain promotions
- Pioneers can no longer plant forests on peaks
- Promotion buttons now provides the promotion you would expect when editing a unit in world builder
- Livestock breeding speed now takes game speed into account
- Fixed issue with events triggering incorrectly because events used map width instead of looking for Europe access plots
- AI will no longer attack with units after they moved and spent all their movement points
- Cached power value for each player is now calculated correctly and is recalculated on load (might affect OOS)
- #399 pressing F10 will no longer trigger an assert due to action not being handled by the DLL (it's handled by python)
- The button to rest until healed is no longer available if healing is negative (like inside a storm)
- Rebel production modifier no longer applies to happiness (that's how it was coded in the GUI, but not game logic)
- EVENTTRIGGER_TRADEFORT3 no longer causes a python error
- The king's diplo events now takes place before the player can trade in Europe (to avoid the player from gaining/losing money before the window pops up)

AI
- New rules for picking which buildings to build makes the AI develop colonies way more than it used to

Performance:
- New building rules replaces old code, which was way slower
- #439 Updating map view while moving weather much faster (typically 90% CPU reduction)
- Natives no longer spend time checking if European-only random events will trigger for them
- Lakes are now identified by terrain rather than more complex (slower) code, which takes number of plots into account

Release:
- All files are now placed in Assets, not split between Assets and assets (affects Linux, but not windows)
- MD5 and sha1 checksums provided for release builds

Modding Features:
- InfoArray will now cause compile error if used with incorrect types (like reading a unit from a building array)
- CvPlot can now determine if a certain terrain/feature/plottype/... is within X plots from it (searching for either single value or InfoArray values)
- Some invalid xml assert messages now show up as error messages even if asserts are disabled
- Added more error messages for incorrectly configured xml files (mainly for events/event triggers)
- World Builder will automatically convert between coast, ocean and lakes when closing
- Converts non-ascii to ascii when on non-western European languages (prevents errors/crash)


Version 2.9

Features:
- Large rivers (not in random maps yet)
- Goody huts with guards, which periodically spawns hostile natives/raiders/animals (depending on type)
- New file icons for shortcuts

Improvements:
- Multiple updated graphics
- More events/quests
- Added specialist settler
- New Swedish audio for units (now they actually speak Swedish)
- New sounds for Africa and Port Royal
- Added large rivers to premade maps + varous small adjustments to them
- Pointless vanilla game options are no longer displayed
- Rearranged import/export popup in the colony screen and added a colopedia concept page on how to use it

Fixes:
- Loading a savegame will no longer risk incorrectly removing fog of war from plots
- #425 Auto export is now saved correctly
- Roads can now be build on peaks even if it's surrounded by only peaks
- Buildings providing a road on the colony plot will no longer downgrade the road quality
- #442 Fixed multiple bugs, which caused automated transports to not move
- Removed case where raiding natives could report burning down a building without removing any buildings
- #401 Blocked vanilla from trying to load map scripts (and fail) while starting vanilla
- Fixed vanilla bug where circles on the map might not update correctly if a team has more than one player
- Shipwrecks discovered by founding a colony will no longer cause bugs due to referring to the ship doing the discovery
- Barbarian units are no longer called "wild animals" in mouseover help text
- Ships using automated exploration will now aim for shipwrecks just like automated scouts on land search ruins
- Clearing a unit speciality in a rebelling colony will no longer crash the game
- Forts now update field of view as intended
- #437 Scrolling up will no longer move the "unit pointer icon" behind the bottom panel
- #459 Founding Fathers and traits providing extra yield on the colony plot will now provide the bonus (vanilla bug)

AI:
- AI will now actively search shipwrecks. It's now a race to get them first

Modding features:
- #438 Generic parameters in events now accept both ints and type strings (still stored as ints internally)
- Introduced a new way of packing data in network packages (hopefully this will prevent trade routes from breaking again)

World Builder:
- Changing profession anywhere is once again allowed
- Allows premade maps to randomize features (forests)


Version 2.8.2.4

Improvements:
- Better optimization at compile time (Whole Program Optimization)
- Scripted release building for consistency between releases (easier to download newest release)

Fixes:
- Fixed fog of war not appearing on some plots
- #409 Fix bug where ships could try to flee instead of defending if attacked. Fleeing then failed, causing instant destruction of the ship.

Version 2.8.2.3

Improvements:
- Various performance improvements

Fixes:
- Native Advisor: clicking on a settlement icon is now a shortcut to jumping to the settlement (doesn't always work)
- Merging treasures is no longer able to create treasures containing 0 gold
- Various fixes to town guards
- Fixed freeze if AI transport can't reach any colony

Version 2.8.2.2

Improvements:
- "Jump to settlement" in native advisor now works by clicking a button rather than mouse over (no more accidental jumping/closing)

Fixes:
- Fixed severe slowdown related to exploring AI and ship loading
- Hot seat multiplayer will no longer crash during the diplomacy screen
- #394 units with invalid professions will no longer crash the game
- Happiness cooldown counter (turns since last happy event) will not longer become corrupted
- Fixed network OOS related to happiness cooldown counter
- Colopedia improvement page now always links to bonuses as intended (no more units)

Old savegames still work, but time since last happiness event in colonies will be reset to get rid of corrupted counters.
Not a major issue because it only happens while upgrading.

Version 2.8.2.1
Fixes:
- Pioneers will now calculate correct work rate on load (not stacking cache on each load)
- Units stuck in colonies with NO_PROFESSION will now be kicked out to make then reachable for the player again
- Changing from a military profession will now always remove the free promotions from that profession*

* the fix prevents new units from getting corrupted promotion cache, but units already affected in 2.8.2.0 savegames will not be fixed.

Version 2.8.2.0
WARNING: NOT SAVEGAME COMPATIBLE
Savegames from previous versions will not load

New Features:
- colony plot radius is now a map option (no need for switching DLL files)

- Improvements:
- Added trading post, health and happiness to Domestic Advisor
- Added "jump to settlement" to native advisor (still needs more work. Triggers on mouse over)
- Added Europe trade quests
- Automated ships now explore shipwrecks

Balance:
- Ships now have a better chance of withdrawing 

Fixes:
- Fixed number of stored lumber and stone turning red in cases when it should be green
- Import limits in colonies now work as intended again
- Various text fixes
- Various event fixes

AI:
- Better handling of Settlers
- Fix: now considers how much is stored in the colonies when buying cargo in Europe

Internal features:
- New savegame format
- New "engine" for making pages in the domestic advisor
- New data structures (EnumMap, InfoArray, caches etc)
- CivEffects
- Plenty of xml verification for early automated bug catching

Version 2.8.1
WARNING: NOT SAVEGAME COMPATIBLE
Savegames from previous versions will not load

New Features
- Overhauled Founding Cities Mechanic using Profession "Settler"
- Failed Missionary (from Ramstormp)
- "Happiness Advisor Tab" in Domestic Advisor (from Raubwuerger)

New Events
- Python Event "Sell Native Slave" (from @Acheron81)
- Python Event "Sell African Slave" (from @Acheron81)

Improvements and Balancing
- AI improvements for Missionaries and Native Traders
- Rebel Bonus on Happiness from Buildings removed
- max. Unhappiness from Tax Rate capped to City Population
- Fixed many small Asserts (uncritical Warnings in Code)
- several small Improvements considering Python Events
- several AI improvements
- code refactoring for performance and stabilities

Fixes
- Fixed Visibility Bug on Ocean
- Fixed Shift-Key Bug for Loading in Port Royal
- Fixed Python Exception in Port Royal when lacking Funds
- Fixed Bug in King Unit Requests
- Fixed Bug in XP Cap (for Wild Animals and Runaways)
- Fixed bug of settings for "City Center Plot Yield" not being stored
- Several small text corrections (English and German)

Version 2.8
WARNING: NOT SAVEGAME COMPATIBLE
Savegames from previous versions will not load

New Features
- New concept: colonist happiness
- Added the ability to open trading posts in native settlements
- Readded town guard unit
- European Line Infantry can now change profession
- Treasures can now merge
- Slaves can now revolt and they can become free
- Russians now have their own priest and missionary units
- Added some Russian founding fathers
- New game option: Only 1 colonist living with Natives at at time

Improvements:
- #309 Added message when unrest ends in a colony
- added 5 new quests
- Turn counter displayed for units working to become experts or become free
- Citizen help now display yield modifiers
- Python errors will now always be displayed (makes bug reports more useful)

Balance:
- #124 you can no longer just take whatever cargo you want from natives even if you have a permanent alliance
- #138 hemp can now be produced on colony plot
- #253 rebalanced rangers to make them more useful
- #336 lost tribe random event is now less likely to trigger and not as rewarding
- #354 trapper vs hunter balance redone
- #356 cattle thieves random event will now steal less cattle
- Kings sends less troops for declaring war and the enemy will also get reinforcements if you do
- Rebalanced when a governor is offered and price
- Rebalanced some profession bonuses for balance and consistency
- Greatly reduced some overpowered expert bonuses. It's no longer possible to get +300% from an expert
- Hurry cost now use 150% of cargo cost in Europe (was 125% from vanilla)
- The 5 dock quest now gives a frigate instead of a ship-of-the-line
- Some units now have a defense of 1 instead of 0
- Lumber mill improvement is now called sawmill and is an upgraded lumber camp
- Founding Father Samuel Adams now cost the intended 11.000 trade points, not 1.100 (technically a bugfix, but it affects balance)

Fixes:
- #42 help text is no longer able to reveal the owner of units with hidden nationality
- #44 #45 Custom house popup now clearly tells which yields will never be sold
- #68 Political refuges can now become experts though learning by doing
- #85 native settlement billboards (nametags) now display if the natives are too angry to trade
- #120 greatly reduced usefulness of the found and abandon exploit
- #160 natives will no longer build ships
- #226 Defensive buildings (like stockade) would not always be displayed on the 3D map
- #235 incorrect wording in event help text (like increased by -1)
- #244 random event: selling a man to the natives should give you money, not cost you money
- #252 Goto Port Royal button is now hidden if the ship can't go there
- #257 ships will flee if possible instead of getting destroyed if they are in a colony when it's captured
- #279 wrong revolution icon when displaying effects of leader traits
- #289 incorrect display of culture in events (display bug only)
- #336 animals and escapees can no longer be used to farm massive amounts of XP
- #340 free ships (founding father bonus) can no longer spawn in the middle of the map
- #348 added goto button for coastal ships. Still no goto Europe for obvious reasons
- #358 Monasteries can now grow large even if they are outside your cultural borders
- #361 Gold icon (top left) could be drawn on top of text about current turn and turn limit
- Allowing Wagon Trains to be captured again
- Governor units no longer have a domestic need for 0.05 food/turn because it's always rounded to 0 anyway
- Sophisticated trait no longer has inverted tax rate threshold modifier
- Removed "Cannot declare war" text in help popup in some cases where it shouldn't have been included
- Various quest related issues
- Some quests will now not show up in multiplayer as they can cause network desyncs
- Fixed many small issues with text display

Version 2.7.2

Translation Improvements:
- Translators can now use UTF-8 instead of html escapes for non-ASCII characters (doesn't actually unlock all of unicode though)
- Strings missing in a translation will now use the English string instead of crashing the game
- Ingame mod credits now mentions WTP and is much easier to translate and maintain

AI Improvements:
- #171 AI great admirals now ignore privateers
- #123 AI will now value maps higher in diplomacy if they contain unvisited villages
- #171 Fix overproduction of coastal transports
- #171 AI now no longer ignores bonuses on impassable plots when planning colony placement
- #171 AI now evaluates culture correctly

Fixes:
- #83 Fixed a crash when changing which yield to produce on a colony plot (debug mode only)
- #267 Fixed AI freezing the game (infinite loop) in some cases when splitting up a group of units
- #258 Abandoning a colony will no longer allow setting professions without paying the yield cost
- #234 Colored circles that mark goodies will now only appear if the scout(expert only) or ship can actually move into the target plot. Changed the color of the circle to green to indicate that these units may only receive benefits.
- #240 Fix bug that suggested that a boycott could be lifted during the revolution
- #171 Boosts performance by caching the visual range of the best unit instead of calculating each time
- #147 Boosts performance when trying to find a path to Europe (only look at actual Europe access plots)
- Fixed makefile bug, which caused 1 plot dll files to run in debug mode (way too slow)

Version 2.7.1.1

Fixes:

- Bug in choose profession GUI, which could result in the popup window showing up each turn in multiplayer
- AI players no longer have free custom houses
- Natives now store production from more than one turn (related to the custom house issue)

Version 2.7.1

Improvements:
- #83 Clicking on the colony plot in the colony screen allows changing which yield to produce.
- #199 Double click a unit in garrison now brings up choose profession.

AI improvements:
- #17 automated coastal ships now pick routes as ships, like going between islands instead of competing against land transport.
- #171 Fixed a mistake that would have the AI consider the cities on its own team as being possible victims. Removed a cheat so that the AI has to have revealed the target city.

Fixes:
- #2 Native haggling exploit fixed: natives will no longer automatically accept haggles with replaced / added items.
- #23 typo: Priate Map fixed
- #26 Forts are upgraded by UNITCOMBAT_GUN or UNITCOMBAT_SIEGE, not just Colonial Militia.
- #26 Forts no longer upgrades from being worked on by a colony, only by placing military units on it.
- #40 Worldbuilder issue making very difficult to set diplomatic attitudes fixed.
- #51 Fixed case where AI could turn stone into lumber (copy paste error)
- #73 Shipwrecks no longer appear under ice.
- #86 The Domestic Advisor: Native tab now allows sorting by the goods the indians want.
- #87 Hurry production fails if there isn't warehouse space.
- #96 The Domestic Advisor: native tab now shows natives that you have discovered, but not yet talked with.
- #156 1 plot colony radius allowed colonies to be placed too close, even next to each other in some cases.
- #164 Out of sync GameFont ids resulted in wrong mission icons in Domestic Advisor.
- #172 Remove meaningless assert checks. (Being short on money is completely legitimate and not an error :P)
- #178 CvPlot::updateWorkingCity() now updates cache for CvPlot::hasYield() if the city change.
- #190 Colonies used human player for culture spread threshold instead of colony owner. Spain has a discount.
- #190 Fixed network desync related to culture spread if a human player is Spain.
- Crash if a colonist is on land on the edge of the map (founding code didn't take map edge into account).
- Combat (game) freezes when defeating the last unit of a (European only?) player.
- Colony import all/auto export all buttons now works again (broke in RaR 2.6)

Graphics:
- #158 Reintroduced the pre 2.7 loading screen
- #174 Pick a random loading screen each time a screen is displayed (currently the list has just one file)

Changes affecting xml modders:
- Domestic Advisor can display GameFont characters when using a debug DLL.
- #92 Custom house overhaul, moving settings from DLL hardcoding to xml.

DLL modding changes:
- #54 xml missing & on a local reference to an xml info class will now cause a compile error. Crashes from this issue are time consuming to track down.
- #190 Added network sync logging/debugging tool to track down causes of OOS.

Bugfixes from RaR (after 2.7, not released in stable before, all made by WTP members)
- BUG22: We only allow ships to sail to Port Royal if all units in the group are allowed to do so
- BUG23: Pirates and other non-animal "barbarians"/wild-animals will no longer result in a warning about animals
- BUG24: Citizens will no longer seem to disappear if re-assigned (by double clicking) to a plot with no apparent economic value. Removed testing/debug code.
- BUG25: Disable the European peace DLL event if the game option always war is enabled
- BUG26: Fixed the city import/export dialog issue (maintainLevel and importLimitLevel got swapped in the network code)
- BUG27: Fixed the coastal ship teleport / chain capture bug (units were allowed to jump to enemy cities)
- BUG28: Adapted from K-mod. Fixed an issue in getBestDefender that could make the AI think that a unit inside a transport was a valid defender. Additional optimizations (by refactoring some of the functionality into a separate and more effective hasDefender()
- BUG29: Fixed issue that caused the foreign advisor screen to draw red lines even though the players were at peace
- BUG30: The info screen demographics and graphs now only include the European players. The animals, church, kings and natives are excluded.
- BUG31: Native players that are in a permanent alliance with Europeans will not be shown as the owner FFs
- BUG32: The king will no longer offer civilians\colonists (e.g. doctors) when requesting military help
- BUG33: Ships that enter the map after returning from a port will no longer risk being placed on impassable terrain (e.g. ice)
- BUG34: Attempt to fix the issue where a wagon carrying sheep exceeded the import limit of the city, causing the excess to be taken to the  capital (which did not even import the yield in question)
- BUG35: From K-mod: "Fixed a group pathfinding bug in the original bts code"
- BUG35: We will no longer attempt to make peace with ourselves!
- BUG36: Imported several fixes from K-mod: (list of 7 items not included here)
- BUG37: Adapted from K-mod. Fixed the issue that causes the wrong odds (due to selecting the wrong defender) to be displayed if units from different players were on the same plot
- BUG37: Fix strange divide by zero bug in CvPlayerAI::AI_transferYieldValue. It's weird that this happened so I am adding an assert to help detect issues caused by variables unexpectedly having negative values!
- BUG38: Adapted from K-mod, alberts2, DarkLunaPhantom. Various fixes concerning "Typos, order of operations mistakes, memory leaks, missing initialisers, style changes."
- BUG40: Adapted from K-mod. Whenever we check the attitude towards our own team, we're always friendly :P
- BUG41: Adapted from K-mod \ Unofficial patch. CvUnit::healTurns and CvUnit::canHeal - Now handles damage and healing from plot features (thanks LunarMongoose)
- EXP2: The cap on negative attitude from requesting military help from the king has been lowered to prevent players from permanently being able to buy discounted military units
- EXP3: If war is declared on another European nation, the aggressor will receive a major diplomatic attitude penalty with its king as well
- EXP4: To receive revolutionary support, we now require the player to be on good terms with the potential supporter's king as well
- EXP5: AI players fighting the revolutionary war will no longer consider a bribe to sign peace with their king. Also they will no longer reply with the "we'd love to, but you would have to ask them" nonsense :P
- GAME1: African slaves now have the same restrictions as native slaves with respect to allowed professions
- OPT3: From K-mod: "Made some minor efficiency improvements to CvUnitAI::AI_promote"
- OPT4: From K-mod: Disabled some obsolete BtS code.
- OPT5: Adapted from K-mod. Blocked most python callbacks and recoded those who only had a python implementation in C++. The callbacks can be reenabled in XML.
- OPT6: Optimized and refactored CvSelectionGroupAI::AI_tradeRoutes / CvSelectionGroupAI::AI_getYieldsLoaded. Added a helper CvSelectionGroupAI::processTradeRoute
- NOCHEAT1: Slaves and prisoners may no longer found cities (XML must be updated to disallow)
- ACO1: Implemented a modified version of PieceOfMind's Advanced Combat Odds modcomp for BTS that supports the limited combat rounds feature in RaR
- AI14: Prevent the AI from purchasing smuggling ships when offered since it doesn't know how to put them to use
- AI15: Tweak AI to produce less coastal transports and more wagons
- AI16: Block AI from producing YIELD_CANNON
- AI17: Restricting the UNITAIs considered by great generals / admirals
- AI18: Adapted from K-mod. AI explorers will now try to make contact with mapped but unmet players. Added missing const.
- AI19: By mistake I had broken CvPlayerAI::AI_needsProtection by omitting to return true when a transport needed protection.
- AI20: Added isProfessionalMilitary() mainly to prevent the AI from having units with GGs attached join cities.
- AI21: Prohibit the AI from ever exporting tools, blades, muskets and cannons to Europe. We can make the logic more refined in the future but for now the AI needs strict hand-holding
- EVENTS3: The WHALING event is no longer recurrent since the event's logic cannot handle it correctly


Religion and Revolution: Version 2.7 // Changelog

PLEASE NOTE THAT Version 2.7 IS NOT SAVEGAME COMPATIBLE WITH PREVIOUS VERSIONS!

Fixes: 

- Corrected several XML issues (duplicates etc.)
- Removed dialog that asks for confirmation for declaration of war when entering a native village if the unit in question is a transport
- Natives will not teach skills if they are still angry due to bargaining
- If a size 1 city is razed, the player no longer gets an annoying and redundant message stating that the city will be abandoned
- Corrected artillery unit texture scaling issue in Europe. Removed the code for the other ports since it is not needed
- The great tool factory will correctly reduce the food yields of the city 
- The graduation of colonists will no longer be able to cause a CTD (was only an issue when English text was used)
- Attempting to assign a unit that produces nothing on a plot (noble, governor etc.) no longer causes a CTD
- Fix swapped import / export limit parameters
- Fix graphical glitch/redraw problem that happens if the player has insufficient gold to buy a slave in Africa. 
- Some graphic bugs cavalry and dragoons fixed
- RaR Americas Gigantic map bug with church fixed
- Bug Fix Map RAR Americas Gigantic and RAR Americas Huge; Church and Wild animals work fine now


Events:

- Disabled problematic events that could potentially cause CTD
 

Map generator:

- Indian villages will no longer be placed on top of bonus resources.
- Added a new version of the FaireWeather map script with a new option called regularity (Credit to Deliverator) which creates less predictable continents layouts.


AI:

- Fix AI handling of professions with multiple input yields
- AI players can now travel to the African port to sell goods/treasure and buy slaves.
- AI now sort the units that wait on the European docks by their value. This ensures that the most valuable units get picked up first.
- Prevent AI transport ships from traveling to Europe if they are carrying at least one unit. The AI should prioritize putting its units to work in the new world and not keep ferrying the same unit(s) back and forth, wasting turns and transport capacity.
- Great generals will now only consider safe paths when relocating between cities. This avoids previously reported issues in which a GG would travel through (or close to) enemy territory
- AI will now prioritize the production of liberty bells
- AI will produce the yields that gives the best profit, either in Europe or Africa.
- AI will no longer overproduce certain yields (ore)
- AI is more likely to produce yields that are used as input for other goods.
- The value of Bells/hammers now scale with the population / rebel percentage.
- AI may choose to go to Africa rather than Europe if to maximize the sale profit
- AI can now use great admirals
- AI will use their starting units better

Other stuff
- New feature: Coastal transport implemented: Coastal transport ships that can only traverse coast or culturally owned tiles. AI knows how to build and use them.
- New units: Small and big coastal ship
- Change of some unit graphics
- New promotions
- Implementation of a new achievement "The Governor arrives"
- Balancing of field workers done
- Great General, Great Admiral and Great Chief now have full combat animations
- New late cityset for Russia 
- In era expansion now all citysets show a mix of their early and late citysets
- England now has a new cityset for the late game (era colonial) that contains some rare colonial buildings (the city shows a mix of late and colonial cityset)
- Incentives of late military founding fathers have been decreased
- The Danish King now use the royal anthem instead of the sports anthem (yes Denmark has two anthems)


Debug Mode:

- If debug mode is activated (ctrl-Z), we now display the AI's valuation of yields when hovering over the stored yields inside a city




Religion and Revolution: Version 2.6 // Changelog

PLEASE NOTE THAT Version 2.6 IS NOT SAVEGAME COMPATIBLE WITH PREVIOUS VERSIONS!

- Game Concepts / Texts for military units updated
- Some minor bugs and typos fixed
- Some new events implemented
- New Unit "Political Refugee" implemented (can be educated very fast in schools).
- Corrected promotion bombardment and added promotion high-sea fisherman 
- Removed hardcoding for which units can move into peaks (can be edited in XML now) - by Nightinggale
- DLL for 2 Plot City Radius corrected / works fine now for both 1 and 2 Plot City radius, 2 Plot is standard
- Slightly changed required blades for cavalry 
- Some small changes order of units in Europe Screen and price for Slaves 
- Improvement of Peak graphic 
- Implementation of Improvement "Sawmill" 
- Bugfix military support by King fixed - King grants only military units now - diplomacy feature again works as intended.
- Some balancing
- Some small updates to some PublicMaps 


Religion and Revolution: Version 2.5.1 // Changelog

Bug Fixes: 
- Freeze Bug fixed (by Nighttinggale)
- European Line Infantry can now get promotions
- Some typing errors fixed
- 1 City Plot Radius bug fixed
- Some minor bugs fixed


Religion and Revolution: Version 2.5 // Changelog

Units & Professions:
- specialist unit helebardier: unit deleted
- specialist unit townguard: unit deleted
- profession helebardier: deleted
- profession town guard: deleted
- Promotion "Promotion Homeland Guard 1-3" implemented ((new tag "<iDomesticBonus>0</iDomesticBonus>")
- correspoding "Domestic Defense Bonus" for units added (new tag "<iDomesticBonus>0</iDomesticBonus>")
- new feature: a new feature has been implemented that is based on the "[MODCOMP] Not Allow Specified Professions per Unit" by Kailric which allows to deny professions for units - e.g. if you want that the governor cannot take the profession as a lumberjack - this is your feature!

Other changes:
- city graphic portugal early: updated
- improvement farm: graphics modified
- specialist butcher: unit graphic modified
- unit graphic settler militia modified
- unit graphic african slave modified
- unit graphic settler modified (female settler added)
- ingame map graphic slightly modified
- graphic for Port Royal changed (new graphic also by Willi Tell)

Founding Fathers
- Amendment of the appearance of a lot of founding fathers to a more reasonable order considering the requirements of the early, mid and late game

Traits
- New Civilization Trait "Agricultural" for Sweden (Swedish civilization trait changed from Forresters to Agricultural):
->+10% Food production in all settlements
->-10% Food required for population growth
- New Civilization Trait "Imperialist" for Russia (Russian civilization trait changed from Hunt tradition to Imperialist):
Imperialist (Russian civilization trait)
-> Free promotion: Homeland Guard I (+15% Combat Strength inside your Cultural Borders)
-> 25% Culture required for Territorial Expansion
The traits of Sweden and Russia have been changed to focuss a bit more on majaor aspects of the game.
- Amendment Trait "Undemanding": Food bonus no longer fixed at 2 for each settlement. It now scales with the bell-producing building that is present in the city (1 Food per Basecamp, 2 per Village Hall, etc.)
- General balancing and amendments of traits for the other European nations and overhaul of the traits for the native nations considering their diversity, historic situation, behaviour and - of course - the game balance. 

Balancing
- units: terrain boni and mali: decreased
- units: combat strength of all units modified
- AIWeight for some buildings modified (AI now handles buildings more effectively and produces weapons)
- a lot of balancing changes



Features and Bugfixes imported from RaR Extended (Nightinggale's mod):

RaRE 2.5.2
Features:
- added yield change preview when mouse hovering pioneers change terrain buttons (drain marsh)
- added yield change preview when mouse hovering pioneers change feature buttons (plant forest)
Fixes:
- Crash when AI investigated building settlements on the edge of the map when the "Reduced colony distance" game option was on

RaRE 2.5.1
Fixes:
- Autoexport wasn't saved correctly
- Freeze when an AI transport tried to load a yield, which was required by the building currently under construction

RaRE 2.5
Features: (all done by Nightinggale)
- added ability to switch between 1 and 2 plot radius for colony catchment area (change of CvGameCoreDLL.dll required in the file directory of the mod)
- feeder service threshold change to supply construction
- import/export window now has buttons to set and clear multiple yields with one click (like clear all)
- autoexport to turn off export when there is nothing to export (no real gameplay change, but should prevent a late game slowdown)
Fixes:
- export threshold is no longer capped at 8 bit/255 (wladyslaw17)
- barbarian pirates now only spawn in areas with access to Europe (wladyslaw17)
- fixed issue where the feature had to be removed to allow building certain improvements, such as vineyards (Nightinggale)
- fixed broken hotkeys due to command order (ray)
